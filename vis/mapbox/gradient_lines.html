<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8' />
    <title>Add multiple geometries from one GeoJSON source</title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v1.2.1/mapbox-gl.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v1.2.1/mapbox-gl.css' rel='stylesheet' />
    <script src="https://cdn.staticfile.org/jquery/2.1.1/jquery.min.js"></script>

    <style>
        body {
            margin: 0;
            padding: 0;
        }

        #map {
            position: absolute;
            top: 0;
            bottom: 0;
            width: 100%;
        }
    </style>
</head>

<body>

    <div id="map"></div>
    <script>

     
            mapboxgl.accessToken = 'pk.eyJ1IjoidGlkdXN1IiwiYSI6ImNqdHNndGM2bjB4Y3c0MnIwbHg4Y20xNmgifQ.KiFS1iqSrCMvik2S_AC7WA';
            var map = new mapboxgl.Map({
                container: "map",
                // style: "mapbox://styles/mapbox/outdoors-v11",
                style: "mapbox://styles/tidusu/cjxldiy0w0sb01dtbtqalrnti",

                center: [121.4691758, 31.2285191],
                zoom: 13.5,
                lineMetrics: true
            });
            map.on("load", function () {

                map.addSource("lines", {
                    "type": "geojson",
                    "data": "line.json",
                    //渐变要加
                    "lineMetrics": true
                    
                });

                map.addLayer({
                    "id": "shlines",
                    "type": "line",
                    "source": "lines",
                    "layout": {
                        "line-join": "round",
                        "line-cap": "round"
                    },
                    "paint": {
                        "line-color": "#ffe400",
                        "line-width": 1,
                        "line-opacity": 0.5,
                        'line-gradient': [
                            'interpolate',
                            ['linear'],
                            ['line-progress'],
                            0, "blue",
                            0.1, "royalblue",
                            0.3, "cyan",
                            0.5, "lime",
                            0.7, "yellow",
                            1, "red"
                            ]
                    },
                    "filter": ["==", "$type", "LineString"],
                });
            })
        
    </script>

</body>

</html>